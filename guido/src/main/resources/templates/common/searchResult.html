<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Guido</title>

    <!-- css -->
    <link rel="stylesheet" th:href="@{/css/main/searchResult.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <!-- slick 슬라이드 -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/main/slide/mainPostSlick.css}">

    <!-- js -->
    <script th:src="@{/libraries/assets/vendors/jquery.min.js}"></script>
    <script th:src="@{/libraries/assets/owlcarousel/owl.carousel.js}"></script>
</head>

<body>

    <th:block th:replace="~{common/header}"></th:block>

    <!-- ***** 카테고리 아이콘 ***** -->
    <div class="categori-icon-box-container">
        <div class="categori-icon-box">
            <div th:each="themeType : ${application.themeTypeList}">
                <!-- <a th:href="@{#}"> -->
                <a th:onclick="|loadSelectedProductByTheme(${themeType.THEME_CODE})|" class="theme-icon-link">
                <!-- <a th:href="@{/common/index/themeType.themeCode}"> -->
                    <img th:src="${themeType.THEME_IMG}" alt="테마 이미지">
                    <button th:text="${themeType.THEME_NAME}">테마 이름</button>
                </a>
            </div>
        </div>
    </div>



    <!-- 상품 게시글 -->
    <article class="main-post">

        <div class="product-post">
            <ul id="productListContainer">  

                <!-- ??? 테마 검색 ajax ??? -->
                <!-- <th:block th:if="${#lists.size(productList)} == 0">
                    <li>
                        <div>상품이 존재하지 않습니다.</div>
                    </li>
                </th:block> -->

                <!-- <th:block th:unless="${#lists.size(productList)} == 0"> -->
                    <li class="product-row" th:each="product : ${searchResultList}">
                        <div class="slider single-item"> 
                            <div class="productImage" th:each="image : ${product.imageList}"> 
                                <img th:src="${image.filePath}">
                            </div>
                        </div>
                        <div class="slide-btn">
                            <img th:src="@{/images/profile/NextBtn.png}" alt="slideNext" class="slick-slide-next">
                            <img th:src="@{/images/profile/PreBtn.png}" alt="slidePre" class="slick-slide-pre">
                        </div>
                        <div class="add-wish-heart">
                            <img class="heart-icon" onclick="toggleHeart()" th:src="@{/images/profile/empty.png}">
                        </div>
                        <div class="sales-text">
                            <div> 
                                <p class="product-name">[[${product.productName}]]</p>
                                <div>
                                    <img th:src="@{/images/profile/slideStar.png}" alt="slideStar">
                                    <span>[[${product.reviewStars}]]</span>
                                </div>
                            </div>
                            <div>
                                <img th:src="@{/images/profile/location.png}" alt="location">
                                <span>[[${product.regionName}]]</span>
                            </div>
                            <div>
                                <p th:text="'₩ ' + ${#numbers.formatInteger(product.productPrice, 3, 'COMMA')} + ' / total'"></p>
                            </div>
                        </div>
                    </li>
                <!-- </th:block> -->

            </ul>
        </div>
    </article>
        

    <th:block th:replace="~{common/footer}"></th:block>


    <script th:inline="javascript">
        jQuery(document).ready(function($) {
        $('.loop').owlCarousel({
            center: true,
            items: 8,
            loop: true,
            nav: false,
            autoplay: true,
            autoplayTimeout: 4000,
            autoplayHoverPause: true,
            mouseDrag: false,
            margin: 10,
            responsive: {
            200: {
                items: 1
            }
            }
        });

        const owl = $('.owl-carousel')

        $('.owl-carousel__next').click(() => owl.trigger('next.owl.carousel'))

        $('.owl-carousel__prev').click(() => owl.trigger('prev.owl.carousel'))

        });
    </script>
    
    <!-- 게시글 슬라이드 -->
    <script th:src="@{/js/main/slide/slick.js}"></script>
    <script th:src="@{/libraries/assets/vendors/highlight.js}"></script>
    <script th:src="@{/libraries/assets/js/app.js}"></script>
    
    <!-- js -->
    <script th:src="@{/js/main/searchResult.js}"></script>
</body>
</html>